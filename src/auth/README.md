# ูุธุงู ุงููุตุงุฏูุฉ ูุงูุชุตุฑูุญุงุช - Clinic Auth System

ูุธุงู ูุตุงุฏูุฉ ุดุงูู ูุนูุงุฏุฉ ุงูุฃุณูุงู ูุฏุนู ุงูุชุญูู ูู ุงููุตูู ุงููุงุฆู ุนูู ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช.

## ุงููููุฒุงุช

### ๐ ุงููุตุงุฏูุฉ
- ุชุณุฌูู ุงูุฏุฎูู ูุงูุฎุฑูุฌ ุงูุขูู
- ุฅุฏุงุฑุฉ ุงูุฌูุณุงุช ุจุงูุชููู
- ุงูุชุญูู ุงูุชููุงุฆู ูู ุตุญุฉ ุงูุชููู
- ุญูุธ ุญุงูุฉ ุงููุตุงุฏูุฉ

### ๐ฅ ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ
- **Admin**: ูุฏูุฑ ุงููุธุงู - ุตูุงุญูุงุช ูุงููุฉ
- **Doctor**: ุทุจูุจ - ุตูุงุญูุงุช ุทุจูุฉ ุดุงููุฉ
- **Nurse**: ููุฑุถ/ุฉ - ุตูุงุญูุงุช ูุญุฏูุฏุฉ ููุฑุนุงูุฉ
- **Receptionist**: ููุธู ุงุณุชูุจุงู - ุฅุฏุงุฑุฉ ุงููุฑุถู ูุงูููุงุนูุฏ
- **Manager**: ูุฏูุฑ - ุนุฑุถ ุงูุชูุงุฑูุฑ ูุงูุฅุญุตุงุฆูุงุช

### ๐ก๏ธ ูุธุงู ุงูุตูุงุญูุงุช
- ุฅุฏุงุฑุฉ ุงููุฑุถู (ุนุฑุถุ ุฅุถุงูุฉุ ุชุนุฏููุ ุญุฐู)
- ุฅุฏุงุฑุฉ ุงูููุงุนูุฏ (ุนุฑุถุ ุฅุถุงูุฉุ ุชุนุฏููุ ุญุฐู)
- ุงูุณุฌูุงุช ุงูุทุจูุฉ (ุนุฑุถุ ุฅุถุงูุฉุ ุชุนุฏููุ ุญุฐู)
- ุงูุนูุงุฌุงุช (ุนุฑุถุ ุฅุถุงูุฉุ ุชุนุฏููุ ุญุฐู)
- ุงููุฏููุนุงุช (ุนุฑุถุ ุฅุถุงูุฉุ ุชุนุฏููุ ุญุฐู)
- ุงูุชูุงุฑูุฑ (ุนุฑุถุ ุฅูุดุงุก)
- ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู (ุนุฑุถุ ุฅุถุงูุฉุ ุชุนุฏููุ ุญุฐู)
- ุฅุนุฏุงุฏุงุช ุงููุธุงู (ุนุฑุถุ ุชุนุฏูู)
- ุงูุฑุณุงุฆู ุงููุตูุฉ (ุฅุฑุณุงูุ ุนุฑุถ ุงูุณุฌูุงุช)

## ุงูุงุณุชุฎุฏุงู

### 1. ุฅุนุฏุงุฏ AuthProvider

```jsx
import { AuthProvider } from './auth';

function App() {
  return (
    <AuthProvider>
      {/* ููููุงุช ุงูุชุทุจูู */}
    </AuthProvider>
  );
}
```

### 2. ุญูุงูุฉ ุงูุตูุญุงุช

```jsx
import { ProtectedRoute } from './auth';

// ุญูุงูุฉ ุจุณูุทุฉ (ุงููุตุงุฏูุฉ ููุท)
<ProtectedRoute>
  <Dashboard />
</ProtectedRoute>

// ุญูุงูุฉ ุจุฏูุฑ ูุญุฏุฏ
<ProtectedRoute requiredRole="admin">
  <UserManagement />
</ProtectedRoute>

// ุญูุงูุฉ ุจุตูุงุญูุฉ ูุญุฏุฏุฉ
<ProtectedRoute requiredPermission="view_patients">
  <PatientsList />
</ProtectedRoute>
```

### 3. ุงูุตูุญุงุช ุงูุนุงูุฉ

```jsx
import { PublicRoute } from './auth';

// ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู (ูุชุงุญุฉ ููุท ูุบูุฑ ุงููุณุฌููู)
<PublicRoute>
  <Login />
</PublicRoute>
```

### 4. ุงูุชุญูู ูู ุงููุญุชูู

```jsx
import { RoleGuard, PermissionGuard } from './auth';

// ุนุฑุถ ูุญุชูู ูุฃุฏูุงุฑ ูุญุฏุฏุฉ
<RoleGuard allowedRoles={['admin', 'doctor']}>
  <SensitiveData />
</RoleGuard>

// ุนุฑุถ ูุญุชูู ูุตูุงุญูุงุช ูุญุฏุฏุฉ
<PermissionGuard requiredPermissions={['view_reports']}>
  <ReportsSection />
</PermissionGuard>
```

### 5. ุงุณุชุฎุฏุงู ุงูู Hooks

```jsx
import { useAuth, usePermissions, useLogin } from './auth';

function MyComponent() {
  const { user, isAuthenticated, logout } = useAuth();
  const { hasPermission, hasRole } = usePermissions();
  const { login, isSubmitting, error } = useLogin();

  // ูุญุต ุงูุตูุงุญูุงุช
  if (hasPermission('create_patients')) {
    // ุนุฑุถ ุฒุฑ ุฅุถุงูุฉ ูุฑูุถ
  }

  // ูุญุต ุงูุฏูุฑ
  if (hasRole('admin')) {
    // ุนุฑุถ ุฅุนุฏุงุฏุงุช ุงููุฏูุฑ
  }
}
```

## ูููุงุช ุงููุธุงู

### Frontend
```
src/auth/
โโโ AuthContext.jsx      # ุงูุณูุงู ุงูุฑุฆูุณู ูููุตุงุฏูุฉ
โโโ ProtectedRoute.jsx   # ููููุงุช ุญูุงูุฉ ุงูุตูุญุงุช
โโโ permissions.js       # ุชุนุฑูู ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช
โโโ hooks.js            # Hooks ูุณุงุนุฏุฉ ูููุตุงุฏูุฉ
โโโ index.js            # ุงูุชุตุฏูุฑ ุงูุฑุฆูุณู
```

### Backend
```
backend/src/
โโโ controllers/authController.js  # ูุนุงูุฌ ุงููุตุงุฏูุฉ
โโโ middleware/auth.js            # ูุณุท ุงูุชุญูู ูู ุงูุชููู
โโโ routes/authRoutes.js          # ูุณุงุฑุงุช ุงููุตุงุฏูุฉ
```

## ููุงุท ุงูููุงูุฉ API

### ุงููุตุงุฏูุฉ
- `POST /api-token-auth/` - ุชุณุฌูู ุงูุฏุฎูู
- `GET /api/auth/user/` - ูุนูููุงุช ุงููุณุชุฎุฏู ุงูุญุงูู
- `POST /auth/logout/` - ุชุณุฌูู ุงูุฎุฑูุฌ

### ุงููุณุชุฎุฏููู
- `POST /register/` - ุฅูุดุงุก ูุณุชุฎุฏู ุฌุฏูุฏ
- `GET /users/` - ูุงุฆูุฉ ุงููุณุชุฎุฏููู

## ุงูุฃูุงู

### ุงูุชููู
- ุงุณุชุฎุฏุงู ุชููู ุนุดูุงุฆู ุขูู (40 ุญุฑู)
- ุญูุธ ุงูุชููู ูู localStorage
- ุฅุฒุงูุฉ ุงูุชููู ุนูุฏ ุงูุชูุงุก ุงูุตูุงุญูุฉ ุฃู ุชุณุฌูู ุงูุฎุฑูุฌ

### ุงูุตูุงุญูุงุช
- ูุญุต ุงูุตูุงุญูุงุช ูู ุงููุงุฌูุฉ ูุงูุฎูููุฉ
- ููุน ุงููุตูู ููุตูุญุงุช ุจุฏูู ุตูุงุญูุฉ
- ุชุญุฏูุฏ ุงูุตูุงุญูุงุช ุจูุงุกู ุนูู ุงูุฏูุฑ

### ุงูุญูุงูุฉ
- ุงูุชุญูู ูู ุงูุชููู ูู ูู ุทูุจ
- ุฅุนุงุฏุฉ ุชูุฌูู ููุตูุญุฉ ุงูุฑุฆูุณูุฉ ุนูุฏ ุงูุชูุงุก ุงูุฌูุณุฉ
- ุชุดููุฑ ูููุงุช ุงููุฑูุฑ

## ูุซุงู ูุงูู

```jsx
import React from 'react';
import { 
  AuthProvider, 
  ProtectedRoute, 
  useAuth, 
  usePermissions 
} from './auth';

// ูููู ุชุณุฌูู ุงูุฏุฎูู
function LoginPage() {
  const { login, isSubmitting, error } = useLogin();

  const handleSubmit = async (values) => {
    const result = await login(values);
    if (result.success) {
      // ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ
    }
  };

  return (
    <form onSubmit={handleSubmit}>
      {/* ูููุฐุฌ ุชุณุฌูู ุงูุฏุฎูู */}
    </form>
  );
}

// ููุญุฉ ุงูุชุญูู ุงูุฑุฆูุณูุฉ
function Dashboard() {
  const { user } = useAuth();
  const { hasPermission } = usePermissions();

  return (
    <div>
      <h1>ูุฑุญุจุงู {user?.firstName}</h1>
      
      {hasPermission('view_patients') && (
        <button>ุนุฑุถ ุงููุฑุถู</button>
      )}
      
      {hasPermission('create_appointments') && (
        <button>ุญุฌุฒ ููุนุฏ</button>
      )}
    </div>
  );
}

// ุงูุชุทุจูู ุงูุฑุฆูุณู
function App() {
  return (
    <AuthProvider>
      <Router>
        <Routes>
          <Route path="/login" element={
            <PublicRoute>
              <LoginPage />
            </PublicRoute>
          } />
          
          <Route path="/" element={
            <ProtectedRoute>
              <Dashboard />
            </ProtectedRoute>
          } />
          
          <Route path="/admin" element={
            <ProtectedRoute requiredRole="admin">
              <AdminPanel />
            </ProtectedRoute>
          } />
        </Routes>
      </Router>
    </AuthProvider>
  );
}
```

## ุงูุชุฎุตูุต

### ุฅุถุงูุฉ ุฏูุฑ ุฌุฏูุฏ
1. ุฃุถู ุงูุฏูุฑ ูู `USER_ROLES` ูู `permissions.js`
2. ุญุฏุฏ ุตูุงุญูุงุช ุงูุฏูุฑ ูู `ROLE_PERMISSIONS`
3. ุฃุถู ุงูุฏูุฑ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฅุถุงูุฉ ุตูุงุญูุฉ ุฌุฏูุฏุฉ
1. ุฃุถู ุงูุตูุงุญูุฉ ูู `PERMISSIONS` ูู `permissions.js`
2. ุฃุถููุง ููุฃุฏูุงุฑ ุงูููุงุณุจุฉ ูู `ROLE_PERMISSIONS`
3. ุงุณุชุฎุฏููุง ูู ุงูููููุงุช ูุน `hasPermission()`

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดุงูู ุดุงุฆุนุฉ
1. **ุงูุชููู ููุชูู ุงูุตูุงุญูุฉ**: ูุชู ุฅุนุงุฏุฉ ุงูุชูุฌูู ุชููุงุฆูุงู ูุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
2. **ุนุฏู ูุฌูุฏ ุตูุงุญูุฉ**: ูุธูุฑ ุตูุญุฉ "ุบูุฑ ูุตุฑุญ" ุฃู ูุฎูู ุงููุญุชูู
3. **ุฎุทุฃ ูู ุงูุดุจูุฉ**: ูุธูุฑ ุฑุณุงูุฉ ุฎุทุฃ ููุงุณุจุฉ

### ุณุฌูุงุช ุงููุฑุงูุจุฉ
- ูุญุต ูุญุฏุฉ ุงูุชุญูู ููุฃุฎุทุงุก
- ูุฑุงูุจุฉ ุทูุจุงุช ุงูุดุจูุฉ
- ุงูุชุญูู ูู ุตุญุฉ ุงูุชููู

## ุงูุฏุนู

ูููุณุงุนุฏุฉ ุฃู ุงูุฅุจูุงุบ ุนู ูุดุงููุ ูุฑุฌู ูุฑุงุฌุนุฉ:
- [ููู ุงูุชูุซูู ุงูููู](../TECHNICAL.md)
- [ุฏููู ุงูุชุทููุฑ](../README.md)
